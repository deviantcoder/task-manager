{% extends '_base.html' %}

{% block head_title %}
    Projects
{% endblock head_title %}

{% block content %}
    <main class="container my-4">
        <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-3 gap-3 bg-dark-subtle p-3 rounded-3">
            <div>
                <h3 class="mb-1">Your Projects</h3>
                <p class="text-secondary small mb-0" id="project-count"
                    hx-get="{% url 'tasks:project_count' %}"
                    hx-trigger="load, project-changed from:body"
                >
                    {{ projects|length }} project{{ projects|length|pluralize:'s' }} total
                </p>
            </div>
            <button type="button" class="btn btn-info rounded-3"
                hx-get="{% url 'tasks:project_create' %}"
                hx-target="#modal-body"
                hx-swap="innerHTML"
                data-bs-toggle="modal"
                data-bs-target="#modal"
            >
                <i class="bi bi-plus-lg me-1"></i>
                New Project
            </button>
        </div>
        <div id="project_list" class="row g-4"
            hx-get="{% url 'tasks:project_list' %}"
            hx-trigger="load"
            hx-target="#project_list"
            hx-swap="innerHTML"
            hx-indicator="#project-list-spinner"
        >
        </div>
        {% include 'includes/spinner.html' with name='project-list' %}
    </main>
{% endblock content %}